<link rel="import" href="../../polymer/polymer.html">
<link rel="stylesheet" type="text/css" href="chat-box.css">
<polymer-element name="chat-box">
<template>
  <div class="chat-window {{chatWindow.targetType}} {{chatWindow.targetId}} window{{$index+1}}" ng-repeat="chatWindow in chatWindows">
    <div class="header">
      <div class="caption">
        {{chatName}}
      </div>
      <i class="remove icon" on-click={{closeWindow}}></i>
    </div>
    <div class="body">
      <div id="loading" class="loading" ng-show="chatWindow.loading">
        Loading
      </div>
      <ul id="messagelist" class="ui list">
        <template id="messages" repeat="{{message in messages}}">
          <li class="item">
            <div class="chat-entry">
              <div class="meta">
                <span class="from">{{message.who}}</span>
                <span class="timestamp">{{message.when | dateAgo}}</span>
              </div>
              {{message.what}}
            </div>
          </li>
        </template>
      </ul>
    </div>
    <div id="poster" class="ui form chat-post">
      <div class="ui input">
        <textarea type="text" placeholder="Chat..."></textarea>
      </div>
      <button class="ui button" on-click="{{sendMessage}}">Send</button>
    </div>
  </div>
</template>
<script src="chat-box.js"></script>
</polymer-element>
